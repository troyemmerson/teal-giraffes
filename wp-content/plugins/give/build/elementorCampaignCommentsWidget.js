(()=>{"use strict";var e={1063:(e,t,n)=>{var r=n(51609),a="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},o=r.useState,i=r.useEffect,s=r.useLayoutEffect,c=r.useDebugValue;function u(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!a(e,n)}catch(e){return!0}}var l="undefined"==typeof window||void 0===window.document||void 0===window.document.createElement?function(e,t){return t()}:function(e,t){var n=t(),r=o({inst:{value:n,getSnapshot:t}}),a=r[0].inst,l=r[1];return s((function(){a.value=n,a.getSnapshot=t,u(a)&&l({inst:a})}),[e,n,t]),i((function(){return u(a)&&l({inst:a}),e((function(){u(a)&&l({inst:a})}))}),[e]),c(n),n};t.useSyncExternalStore=void 0!==r.useSyncExternalStore?r.useSyncExternalStore:l},19888:(e,t,n)=>{e.exports=n(1063)},51609:e=>{e.exports=window.React}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var o=t[r]={exports:{}};return e[r](o,o.exports,n),o.exports}n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var r=n(51609);const a=window.wp.element,o=window.wp.apiFetch;var i=n.n(o);const s=window.wp.url,c=window.wp.i18n;var u=n(19888);const l=()=>{},d=l(),m=Object,f=e=>e===d,g=e=>"function"==typeof e,p=(e,t)=>({...e,...t}),v=new WeakMap;let w=0;const h=e=>{const t=typeof e,n=e&&e.constructor,r=n==Date;let a,o;if(m(e)!==e||r||n==RegExp)a=r?e.toJSON():"symbol"==t?e.toString():"string"==t?JSON.stringify(e):""+e;else{if(a=v.get(e),a)return a;if(a=++w+"~",v.set(e,a),n==Array){for(a="@",o=0;o<e.length;o++)a+=h(e[o])+",";v.set(e,a)}if(n==m){a="#";const t=m.keys(e).sort();for(;!f(o=t.pop());)f(e[o])||(a+=o+":"+h(e[o])+",");v.set(e,a)}}return a},y=new WeakMap,_={},b={},E="undefined",k=typeof window!=E,S=typeof document!=E,O=(e,t)=>{const n=y.get(e);return[()=>!f(t)&&e.get(t)||_,r=>{if(!f(t)){const a=e.get(t);t in b||(b[t]=a),n[5](t,p(a,r),a||_)}},n[6],()=>!f(t)&&t in b?b[t]:!f(t)&&e.get(t)||_]};let L=!0;const[R,x]=k&&window.addEventListener?[window.addEventListener.bind(window),window.removeEventListener.bind(window)]:[l,l],N={isOnline:()=>L,isVisible:()=>{const e=S&&document.visibilityState;return f(e)||"hidden"!==e}},C={initFocus:e=>(S&&document.addEventListener("visibilitychange",e),R("focus",e),()=>{S&&document.removeEventListener("visibilitychange",e),x("focus",e)}),initReconnect:e=>{const t=()=>{L=!0,e()},n=()=>{L=!1};return R("online",t),R("offline",n),()=>{x("online",t),x("offline",n)}}},T=!r.useId,V=!k||"Deno"in window,D=V?r.useEffect:r.useLayoutEffect,P="undefined"!=typeof navigator&&navigator.connection,I=!V&&P&&(["slow-2g","2g"].includes(P.effectiveType)||P.saveData),M=e=>{if(g(e))try{e=e()}catch(t){e=""}const t=e;return[e="string"==typeof e?e:(Array.isArray(e)?e.length:e)?h(e):"",t]};let A=0;const F=()=>++A;async function W(...e){const[t,n,r,a]=e,o=p({populateCache:!0,throwOnError:!0},"boolean"==typeof a?{revalidate:a}:a||{});let i=o.populateCache;const s=o.rollbackOnError;let c=o.optimisticData;const u=!1!==o.revalidate,l=o.throwOnError;if(g(n)){const e=n,r=[],a=t.keys();for(const n of a)!/^\$(inf|sub)\$/.test(n)&&e(t.get(n)._k)&&r.push(n);return Promise.all(r.map(m))}return m(n);async function m(n){const[a]=M(n);if(!a)return;const[o,m]=O(t,a),[p,v,w,h]=y.get(t),_=()=>{const e=p[a];return u&&(delete w[a],delete h[a],e&&e[0])?e[0](2).then((()=>o().data)):o().data};if(e.length<3)return _();let b,E=r;const k=F();v[a]=[k,0];const S=!f(c),L=o(),R=L.data,x=L._c,N=f(x)?R:x;if(S&&(c=g(c)?c(N,R):c,m({data:c,_c:N})),g(E))try{E=E(N)}catch(e){b=e}if(E&&g(E.then)){if(E=await E.catch((e=>{b=e})),k!==v[a][0]){if(b)throw b;return E}b&&S&&(e=>"function"==typeof s?s(e):!1!==s)(b)&&(i=!0,m({data:N,_c:d}))}if(i&&!b)if(g(i)){const e=i(E,N);m({data:e,error:d,_c:d})}else m({data:E,error:d,_c:d});if(v[a][1]=F(),Promise.resolve(_()).then((()=>{m({_c:d})})),!b)return E;if(l)throw b}}const j=(e,t)=>{for(const n in e)e[n][0]&&e[n][0](t)},$=(e,t)=>{if(!y.has(e)){const n=p(C,t),r={},a=W.bind(d,e);let o=l;const i={},s=(e,t)=>{const n=i[e]||[];return i[e]=n,n.push(t),()=>n.splice(n.indexOf(t),1)},c=(t,n,r)=>{e.set(t,n);const a=i[t];if(a)for(const e of a)e(n,r)},u=()=>{if(!y.has(e)&&(y.set(e,[r,{},{},{},a,c,s]),!V)){const t=n.initFocus(setTimeout.bind(d,j.bind(d,r,0))),a=n.initReconnect(setTimeout.bind(d,j.bind(d,r,1)));o=()=>{t&&t(),a&&a(),y.delete(e)}}};return u(),[e,a,u,o]}return[e,y.get(e)[4]]},[q,H]=$(new Map),J=p({onLoadingSlow:l,onSuccess:l,onError:l,onErrorRetry:(e,__,t,n,r)=>{const a=t.errorRetryCount,o=r.retryCount,i=~~((Math.random()+.5)*(1<<(o<8?o:8)))*t.errorRetryInterval;!f(a)&&o>a||setTimeout(n,i,r)},onDiscarded:l,revalidateOnFocus:!0,revalidateOnReconnect:!0,revalidateIfStale:!0,shouldRetryOnError:!0,errorRetryInterval:I?1e4:5e3,focusThrottleInterval:5e3,dedupingInterval:2e3,loadingTimeout:I?5e3:3e3,compare:(e,t)=>h(e)==h(t),isPaused:()=>!1,cache:q,mutate:H,fallback:{}},N),z=(e,t)=>{const n=p(e,t);if(t){const{use:r,fallback:a}=e,{use:o,fallback:i}=t;r&&o&&(n.use=r.concat(o)),a&&i&&(n.fallback=p(a,i))}return n},B=(0,r.createContext)({}),U=k&&window.__SWR_DEVTOOLS_USE__,Q=U?window.__SWR_DEVTOOLS_USE__:[],G=Q.concat((e=>(t,n,r)=>e(t,n&&((...e)=>{const[r]=M(t),[,,,a]=y.get(q);if(r.startsWith("$inf$"))return n(...e);const o=a[r];return f(o)?n(...e):(delete a[r],o)}),r)));U&&(window.__SWR_DEVTOOLS_REACT__=r);const K=r.use||(e=>{if("pending"===e.status)throw e;if("fulfilled"===e.status)return e.value;throw"rejected"===e.status?e.reason:(e.status="pending",e.then((t=>{e.status="fulfilled",e.value=t}),(t=>{e.status="rejected",e.reason=t})),e)}),X={dedupe:!0},Y=(m.defineProperty((e=>{const{value:t}=e,n=(0,r.useContext)(B),a=g(t),o=(0,r.useMemo)((()=>a?t(n):t),[a,n,t]),i=(0,r.useMemo)((()=>a?o:z(n,o)),[a,n,o]),s=o&&o.provider,c=(0,r.useRef)(d);s&&!c.current&&(c.current=$(s(i.cache||q),o));const u=c.current;return u&&(i.cache=u[0],i.mutate=u[1]),D((()=>{if(u)return u[2]&&u[2](),u[3]}),[]),(0,r.createElement)(B.Provider,p(e,{value:i}))}),"defaultValue",{value:J}),Z=(e,t,n)=>{const{cache:a,compare:o,suspense:i,fallbackData:s,revalidateOnMount:c,revalidateIfStale:l,refreshInterval:m,refreshWhenHidden:v,refreshWhenOffline:w,keepPreviousData:h}=n,[_,b,S,L]=y.get(a),[R,x]=M(e),N=(0,r.useRef)(!1),C=(0,r.useRef)(!1),P=(0,r.useRef)(R),I=(0,r.useRef)(t),A=(0,r.useRef)(n),j=()=>A.current,$=()=>j().isVisible()&&j().isOnline(),[q,H,J,z]=O(a,R),B=(0,r.useRef)({}).current,U=f(s)?n.fallback[R]:s,Q=(e,t)=>{for(const n in B){const r=n;if("data"===r){if(!o(e[r],t[r])){if(!f(e[r]))return!1;if(!o(oe,t[r]))return!1}}else if(t[r]!==e[r])return!1}return!0},G=(0,r.useMemo)((()=>{const e=!!R&&!!t&&(f(c)?!j().isPaused()&&!i&&(!!f(l)||l):c),n=t=>{const n=p(t);return delete n._k,e?{isValidating:!0,isLoading:!0,...n}:n},r=q(),a=z(),o=n(r),s=r===a?o:n(a);let u=o;return[()=>{const e=n(q());return Q(e,u)?(u.data=e.data,u.isLoading=e.isLoading,u.isValidating=e.isValidating,u.error=e.error,u):(u=e,e)},()=>s]}),[a,R]),Y=(0,u.useSyncExternalStore)((0,r.useCallback)((e=>J(R,((t,n)=>{Q(n,t)||e()}))),[a,R]),G[0],G[1]),Z=!N.current,ee=_[R]&&_[R].length>0,te=Y.data,ne=f(te)?U:te,re=Y.error,ae=(0,r.useRef)(ne),oe=h?f(te)?ae.current:te:ne,ie=!(ee&&!f(re))&&(Z&&!f(c)?c:!j().isPaused()&&(i?!f(ne)&&l:f(ne)||l)),se=!!(R&&t&&Z&&ie),ce=f(Y.isValidating)?se:Y.isValidating,ue=f(Y.isLoading)?se:Y.isLoading,le=(0,r.useCallback)((async e=>{const t=I.current;if(!R||!t||C.current||j().isPaused())return!1;let r,a,i=!0;const s=e||{},c=!S[R]||!s.dedupe,u=()=>T?!C.current&&R===P.current&&N.current:R===P.current,l={isValidating:!1,isLoading:!1},m=()=>{H(l)},p=()=>{const e=S[R];e&&e[1]===a&&delete S[R]},v={isValidating:!0};f(q().data)&&(v.isLoading=!0);try{if(c&&(H(v),n.loadingTimeout&&f(q().data)&&setTimeout((()=>{i&&u()&&j().onLoadingSlow(R,n)}),n.loadingTimeout),S[R]=[t(x),F()]),[r,a]=S[R],r=await r,c&&setTimeout(p,n.dedupingInterval),!S[R]||S[R][1]!==a)return c&&u()&&j().onDiscarded(R),!1;l.error=d;const e=b[R];if(!f(e)&&(a<=e[0]||a<=e[1]||0===e[1]))return m(),c&&u()&&j().onDiscarded(R),!1;const s=q().data;l.data=o(s,r)?s:r,c&&u()&&j().onSuccess(r,R,n)}catch(e){p();const t=j(),{shouldRetryOnError:n}=t;t.isPaused()||(l.error=e,c&&u()&&(t.onError(e,R,t),(!0===n||g(n)&&n(e))&&$()&&t.onErrorRetry(e,R,t,(e=>{const t=_[R];t&&t[0]&&t[0](3,e)}),{retryCount:(s.retryCount||0)+1,dedupe:!0})))}return i=!1,m(),!0}),[R,a]),de=(0,r.useCallback)(((...e)=>W(a,P.current,...e)),[]);if(D((()=>{I.current=t,A.current=n,f(te)||(ae.current=te)})),D((()=>{if(!R)return;const e=le.bind(d,X);let t=0;const n=((e,t,n)=>{const r=t[e]||(t[e]=[]);return r.push(n),()=>{const e=r.indexOf(n);e>=0&&(r[e]=r[r.length-1],r.pop())}})(R,_,((n,r={})=>{if(0==n){const n=Date.now();j().revalidateOnFocus&&n>t&&$()&&(t=n+j().focusThrottleInterval,e())}else if(1==n)j().revalidateOnReconnect&&$()&&e();else{if(2==n)return le();if(3==n)return le(r)}}));return C.current=!1,P.current=R,N.current=!0,H({_k:x}),ie&&(f(ne)||V?e():(r=e,k&&typeof window.requestAnimationFrame!=E?window.requestAnimationFrame(r):setTimeout(r,1))),()=>{C.current=!0,n()};var r}),[R]),D((()=>{let e;function t(){const t=g(m)?m(q().data):m;t&&-1!==e&&(e=setTimeout(n,t))}function n(){q().error||!v&&!j().isVisible()||!w&&!j().isOnline()?t():le(X).then(t)}return t(),()=>{e&&(clearTimeout(e),e=-1)}}),[m,v,w,R]),(0,r.useDebugValue)(oe),i&&f(ne)&&R){if(!T&&V)throw new Error("Fallback data is required when using suspense in SSR.");I.current=t,A.current=n,C.current=!1;const e=L[R];if(!f(e)){const t=de(e);K(t)}if(!f(re))throw re;{const e=le(X);f(oe)||(e.status="fulfilled",e.value=!0),K(e)}}return{mutate:de,get data(){return B.data=!0,oe},get error(){return B.error=!0,re},get isValidating(){return B.isValidating=!0,ce},get isLoading(){return B.isLoading=!0,ue}}},function(...e){const t=p(J,(0,r.useContext)(B)),[n,a,o]=(e=>g(e[1])?[e[0],e[1],e[2]||{}]:[e[0],null,(null===e[1]?e[2]:e[1])||{}])(e),i=z(t,o);let s=Z;const{use:c}=i,u=(c||[]).concat(G);for(let e=u.length;e--;)s=u[e](s);return s(n,a||i.fetcher||null,i)});var Z;function ee({attributes:e,data:t}){const[n,a]=(0,r.useState)(!1),{comment:o,date:i,donorName:s,avatar:u}=t,{commentLength:l,showAvatar:d,showDate:m,showName:f,readMoreText:g=(0,c.__)("Read More","give")}=e,p=o.slice(0,l)+(o.length>l?"...":"");return(0,r.createElement)("div",{className:"givewp-campaign-comment-block-card"},d&&(0,r.createElement)("div",{className:"givewp-campaign-comment-block-card__avatar"},(0,r.createElement)("img",{src:u,alt:(0,c.__)("Donor avatar")})),(0,r.createElement)("div",{className:"givewp-campaign-comment-block__content"},f&&(0,r.createElement)("p",{className:"givewp-campaign-comment-block-card__donor-name"},s),m&&(0,r.createElement)("p",{className:"givewp-campaign-comment-block-card__details"},i),(0,r.createElement)("p",{className:"givewp-campaign-comment-block-card__comment"},n?o:p),o?.length>l&&!n&&(0,r.createElement)("button",{className:"givewp-campaign-comment-block-card__read-more",onClick:()=>a(!n)},g)))}function te({secondaryColor:e}){return(0,r.createElement)("div",{className:"givewp-campaign-comments-block-empty-state"},(0,r.createElement)("div",{className:"givewp-campaign-donations-block-empty-state__icon"},(0,r.createElement)("svg",{width:"40",height:"40",viewBox:"0 0 40 40",fill:"none",xmlns:"http://www.w3.org/2000/svg"},(0,r.createElement)("path",{d:"M10 33.48h4.351c.567 0 1.131.068 1.681.203l4.597 1.117a7.126 7.126 0 0 0 3.044.07l5.083-.988a7.007 7.007 0 0 0 3.545-1.846l3.596-3.498a2.505 2.505 0 0 0 0-3.615c-.924-.9-2.389-1-3.434-.238l-4.191 3.058c-.6.439-1.33.675-2.082.675h-4.047 2.576c1.452 0 2.628-1.144 2.628-2.557v-.511c0-1.173-.82-2.195-1.99-2.479l-3.975-.967a8.374 8.374 0 0 0-1.976-.236c-1.608 0-4.519 1.332-4.519 1.332l-4.886 2.043m-6.667-.708V34c0 .934 0 1.4.182 1.757.16.314.414.569.728.728.357.182.823.182 1.757.182h1.333c.933 0 1.4 0 1.757-.181.313-.16.568-.415.728-.729.182-.356.182-.823.182-1.757v-9.666c0-.934 0-1.4-.182-1.757a1.667 1.667 0 0 0-.728-.728c-.357-.182-.824-.182-1.757-.182H6.001c-.934 0-1.4 0-1.757.182-.314.16-.569.415-.728.728-.182.357-.182.823-.182 1.757zM28.653 5.989c-.995-2.082-3.288-3.185-5.518-2.12-2.23 1.064-3.18 3.588-2.247 5.804.577 1.37 2.23 4.028 3.41 5.86.435.677.653 1.015.971 1.213.273.17.614.262.936.251.374-.012.732-.197 1.448-.565 1.936-.997 4.698-2.473 5.882-3.37 1.917-1.452 2.392-4.121.957-6.15s-3.937-2.229-5.84-.923z",stroke:e,strokeWidth:"3.333",strokeLinecap:"round",strokeLinejoin:"round"}))),(0,r.createElement)("div",{className:"givewp-campaign-comments-block-empty-state__details"},(0,r.createElement)("strong",{className:"givewp-campaign-comments-block-empty-state__title"},(0,c.__)("Leave a supportive message by","give")),(0,r.createElement)("p",{className:"givewp-campaign-comments-block-empty-state__description"},(0,c.__)("donating to the campaign.","give"))))}function ne({attributes:e,secondaryColor:t}){const{title:n=(0,c.__)("Share your support","give")}=e,{data:a,isLoading:o}=Y((0,s.addQueryArgs)(`/givewp/v3/campaigns/${e?.campaignId}/comments`,{id:e?.campaignId,perPage:e?.commentsPerPage,anonymous:e?.showAnonymous}),(e=>i()({path:e})));return o?null:a&&0===a?.length?(0,r.createElement)(te,{secondaryColor:t}):(0,r.createElement)("div",{className:"givewp-campaign-comment-block"},(0,r.createElement)("h4",{className:"givewp-campaign-comment-block__title"},n),(0,r.createElement)("p",{className:"givewp-campaign-comment-block__cta"},(0,c.__)("Leave a supportive message by donating to the campaign.","give")),a?.map(((t,n)=>(0,r.createElement)(ee,{key:`givewp-campaign-comment-${n}`,attributes:e,data:t}))))}class re extends elementorModules.frontend.handlers.Base{render(){const e=document.querySelectorAll(`[data-id="${this.getID()}"] [data-givewp-campaign-comments]`);e?.forEach((e=>{const t=(0,a.createRoot)(e),n=JSON.parse(e.dataset?.attributes),o=e.dataset?.secondaryColor;t.render((0,r.createElement)(ne,{attributes:n,secondaryColor:o}))}))}onInit(){this.render()}}window.addEventListener("elementor/frontend/init",(()=>{elementorFrontend.hooks.addAction("frontend/element_ready/givewp_campaign_comments.default",(e=>{elementorFrontend.elementsHandler.addHandler(re,{$element:e})}))}))})();